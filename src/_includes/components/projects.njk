{% set cfg = projects %}
<div class="projects-section">
  <h2>Projects</h2>

  {% if cfg.items | length <= 6 %}
    <div
      class="projects-grid"
      style="
        --proj-card-w: {{ cfg.cardWidth }};
        --proj-card-h: {{ cfg.cardHeight }};
        --proj-cols: {{ cfg.columns }};
      "
    >
      {% for proj in cfg.items %}
        <div class="proj-card">
          <div class="proj-poster">
            <h3>{{ proj.title }}</h3>
            <span class="proj-year">{{ proj.year }}</span>
          </div>
        </div>
      {% endfor %}
    </div>

  {% else %}
    <div class="projects-carousel">
      {% if cfg.items | length > 6 %}
        <button class="arrow arrow-left" disabled>&lt;</button>
      {% endif %}
      <div class="projects-track"
        style="
          --proj-card-w: {{ cfg.cardWidth }};
          --proj-card-h: {{ cfg.cardHeight }};
        ">
        {% for group in cfg.items | chunks(6) %}
          <div class="projects-group">
            {% for proj in group %}
              <div class="proj-card">
                <div class="proj-poster">
                  <h3>{{ proj.title }}</h3>
                  <span class="proj-year">{{ proj.year }}</span>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endfor %}
      </div>
      {% if cfg.items | length > 6 %}
        <button class="arrow arrow-right">&gt;</button>
      {% endif %}
    </div>
  {% endif %}
</div>
